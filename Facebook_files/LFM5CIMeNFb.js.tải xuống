;/*FB_PKG_DELIM*/

__d("MAWMediaSetClientMediaStatus",["I64","MAWClientMediaStatusUtils","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,g){c("promiseDone")(a,function(a){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.client_media_status.get(e));return a.client_media_status.upsert([e],babelHelpers["extends"]({downloadRetryCount:(a=b==null?void 0:b.downloadRetryCount)!=null?a:(h||(h=d("I64"))).zero,id:e,mainMediaStatus:d("MAWClientMediaStatusUtils").getClientMediaStatusType(g.mainMediaStatus),mainMediaStatusDetails:g.mainMediaStatusDetails,previewMediaStatus:(g==null?void 0:g.previewMediaStatus)!=null?d("MAWClientMediaStatusUtils").getClientMediaStatusType(g.previewMediaStatus):void 0,previewMediaStatusDetails:(b=g.previewMediaStatusDetails)!=null?b:void 0},d("MAWClientMediaStatusUtils").getValidationResults((a=g.validationResult)!=null?a:void 0)))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":28")})}g.call=a}),98);
__d("MAWMediaSetMediaValidatedResult",["LSIntEnum","MAWClientMediaStatusUtils","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,g){c("promiseDone")(a,function(a){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.client_media_status.get(e));return b==null?a.client_media_status.add(babelHelpers["extends"]({id:e,mainMediaStatus:(h||(h=d("LSIntEnum"))).ofNumber(1),mainMediaStatusDetails:"optimistic_with_validation_result",previewMediaStatus:h.ofNumber(1),previewMediaStatusDetails:"optimistic_with_validation_result"},d("MAWClientMediaStatusUtils").getValidationResults(g))):a.client_media_status.put(babelHelpers["extends"]({},b,{id:e},d("MAWClientMediaStatusUtils").getValidationResults(g)))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":26")})}g.call=a}),98);
__d("MAWMediaSetRetryingAndIncreaseCount",["FBLogger","I64","LSIntEnum","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){c("promiseDone")(a.then(function(a){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.client_media_status.get(e));if(b==null){c("FBLogger")("messenger_web_media").mustfix("Trying to increase download retry count without pre-existing media status %s",e);return}return a.client_media_status.put({downloadRetryCount:(h||(h=d("I64"))).add((a=b.downloadRetryCount)!=null?a:(h||(h=d("I64"))).zero,h.one),id:e,mainMediaStatus:(i||(i=d("LSIntEnum"))).ofNumber(5),mainMediaStatusDetails:"manual_retry"})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":23")}))}g.call=a}),98);
__d("useClientMediaStatus",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(6),e=(h||(h=c("useReStore")))(),g;b[0]!==a?(g=a.filter(j).map(i).join(","),b[0]=a,b[1]=g):g=b[1];var k=g;b[2]!==e.tables.client_media_status||b[3]!==k?(a=function(){if(k==="")return d("ReQL").empty();var a=k.split(",").map(function(a){return d("ReQL").fromTableAscending(e.tables.client_media_status).getKeyRange(a)});if(a.length===0)return d("ReQL").empty();else if(a.length===1)return a[0];return d("ReQL").union.apply(void 0,a)},g=[k,e.tables.client_media_status],b[2]=e.tables.client_media_status,b[3]=k,b[4]=a,b[5]=g):(a=b[4],g=b[5]);b=d("ReQLSuspense").useArray(a,g,f.id+":29");return b}function i(a){a=a.statusKey;return a}function j(a){a=a.mediaStatus;return a==null}g["default"]=a}),98);